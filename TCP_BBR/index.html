

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=dark>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/images/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="费良宏">
  <meta name="keywords" content="计算机网络,Linux,network,服务器,elasticsearch">
  
    <meta name="description" content="介绍Linux 默认的CUBIC算法，在高延迟、高丢包的网络情况下，单线程TCP性能会严重受限制。 BBR算法可以提高TCP传输在高延迟网络中的性能表现，可以最大程度的利用带宽。于Linux kernel 4.9开始正式加入内核。 PS：但注意只会加速上行流量。">
<meta property="og:type" content="article">
<meta property="og:title" content="TCP拥塞控制算法–从 CUBIC 到 BBRv2">
<meta property="og:url" content="https://songxwn.com/TCP_BBR/index.html">
<meta property="og:site_name" content="Song&#96;s Blog">
<meta property="og:description" content="介绍Linux 默认的CUBIC算法，在高延迟、高丢包的网络情况下，单线程TCP性能会严重受限制。 BBR算法可以提高TCP传输在高延迟网络中的性能表现，可以最大程度的利用带宽。于Linux kernel 4.9开始正式加入内核。 PS：但注意只会加速上行流量。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img.songxwn.com/file/85c3bb82d7224c6cea8ca.png">
<meta property="article:published_time" content="2023-05-20T03:47:39.000Z">
<meta property="article:modified_time" content="2023-05-20T07:33:38.838Z">
<meta property="article:author" content="Song">
<meta property="article:tag" content="network">
<meta property="article:tag" content="tcp">
<meta property="article:tag" content="BBR">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://img.songxwn.com/file/85c3bb82d7224c6cea8ca.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>TCP拥塞控制算法–从 CUBIC 到 BBRv2 - Song`s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/scroll.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"songxwn.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":100,"cursorChar":"|","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":false,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":true,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Song`s Blog" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Song`s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>主页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/books/">
                <i class="iconfont icon-books"></i>
                <span>读书</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/atom.xml">
                <i class="iconfont icon-rss"></i>
                <span>RSS</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://img.songxwn.com/file/9a6a3f4c572b478a6a538.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="TCP拥塞控制算法–从 CUBIC 到 BBRv2"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-05-20 11:47" pubdate>
          2023年5月20日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.1k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          51 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">TCP拥塞控制算法–从 CUBIC 到 BBRv2</h1>
            
              <p class="note note-danger">
                
                  
                    本文最后更新于：2023年5月20日 下午
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>Linux 默认的CUBIC算法，在高延迟、高丢包的网络情况下，单线程TCP性能会严重受限制。</p>
<p>BBR算法可以提高TCP传输在高延迟网络中的性能表现，可以最大程度的利用带宽。于Linux kernel 4.9开始正式加入内核。</p>
<p>PS：但注意只会加速上行流量。</p>
<span id="more"></span>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>诞生于1974年的TCP协议（Transmission Control Protocol，传输控制协议）绝对算得上是最古老的网络协议之一，很可能是当今互联网上使用最多的网络协议。我们每个人每天不经意间就会发送和接收几十万甚至超过一百万以上的TCP数据包用来收看视频、玩游戏或者进行网络社交。</p>
<p>再进一步，也许你还了解目前互联网上最流行的两种传输协议UDP和TCP。UDP概括起来是一个“发送后不管”的协议。它是无状态的，没有拥塞控制或可靠的传输支持，这也导致了网络运营商会针对UDP协议的限流。我们经常看到UDP被用于DNS（域名系统）和NTP（网络时间协议）等。与之相对，TCP则像是UDP互补的孪生兄弟，提供了可靠的传输和流量控制，因此TCP协议也变得相当复杂。</p>
<p>人们通常认为TCP和UDP的主要区别就是TCP给我们提供了可靠的数据包传输。当然这是TCP最重要的功能之一，但TCP协议还为我们提供了流量控制。流量控制关乎网络使用的公平性，这对互联网的有效运行是至关重要的。TCP使用多种拥塞控制策略来避免拥塞。具体来讲，TCP会为每条连接维护一个“<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6#%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3">拥塞窗口</a>”来限制可能在端对端间传输的未确认分组的总数量。并且，TCP在一个连接初始化或超时后使用一种“慢启动”机制来增加拥塞窗口的大小。所谓的“慢启动”，指的是初始值虽然比较低，但其增长极快：当每个分段得到确认时，拥塞窗口会增加一个MSS（Maximum segment size），使得在每次<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E4%BE%86%E5%9B%9E%E9%80%9A%E8%A8%8A%E5%BB%B6%E9%81%B2">往返时间</a>（Round-trip time，RTT）内拥塞窗口能高效地双倍增长。设想一下，如果没有这种形式的流量控制，互联网注定会在海量的数据传输之下不堪使用。</p>
<p>许多年来，不同的流量控制算法已经在各种TCP堆栈中实现和使用。你可能听说过TCP上的一些术语，例如Cubic、Tahoe、Vegas、Reno、Westwood，以及最近流行的BBR等。这些都是TCP中使用的不同拥塞控制算法。这些算法的作用是决定发送方应该以多快的速度发送数据，并同时适应网络的变化。如果没有这些算法，我们的互联网一定会被数据填满并且崩溃。</p>
<p>在Linux 下检查当前可用的拥塞算法可以使用如下命令：</p>
<p><code>sysctl net.ipv4.tcp_available_congestion_control</code></p>
<p>在我的这台机器上就得到了如下的结果 ：</p>
<p><code>net.ipv4.tcp_available_congestion_control = reno cubic bbr bbr2 hybla highspeed htcp veno westwood vegas</code></p>
<p>如果想了解当前使用了哪一种拥塞算法可以使用以下命令：</p>
<p><code>sysctl net.ipv4.tcp_congestion_control</code></p>
<p>得到的结果如下。可以看出当前使用的是Cubic算法</p>
<p><code>net.ipv4.tcp_congestion_control = cubic</code></p>
<p>这里提到的Cubic 是一种较为温和的拥塞算法，它使用三次函数作为其拥塞窗口的算法，并且使用函数拐点作为拥塞窗口的设置值。Linux内核在2.6.19后使用该算法作为默认TCP拥塞算法。我们今天所使用的绝大多数Linux 分发版本，例如Ubuntu、Amazon Linux 等均将Cubic作为缺省的 TCP流量控制的拥塞算法。</p>
<h3 id="BBR-算法"><a href="#BBR-算法" class="headerlink" title="BBR 算法"></a>BBR 算法</h3><p>TCP的BBR（Bottleneck Bandwidth and Round-trip propagation time，BBR）是谷歌在2016年开发的一种新型的TCP 拥塞控制算法。在此以前，互联网主要使用基于丢包的拥塞控制策略，只依靠丢失数据包的迹象作为减缓发送速率的信号。这样做的的效果还是不错的，但随着全球化互联网的迅速普及，我们所使用的网络已经发生了巨大的变化。我们拥有了越来越大的带宽，而现在的互联网质量也越来越好。于是我们观察到了一些新的问题，比如影响延迟的缓冲区膨胀的问题。BBR尝试通过使用全新的拥塞控制来解决这个问题，它使用基于延迟而不是丢包作为决定发送速率的主要因素。下图是一个原理的演示：</p>
<p><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow1.gif"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow1.gif" srcset="/img/loading.gif" lazyload></a><a target="_blank" rel="noopener" href="https://cloud.google.com/blog/products/gcp/tcp-bbr-congestion-control-comes-to-gcp-your-internet-just-got-faster">https://cloud.google.com/blog/products/gcp/tcp-bbr-congestion-control-comes-to-gcp-your-internet-just-got-faster</a></p>
<h2 id="为什么BBR会更好？"><a href="#为什么BBR会更好？" class="headerlink" title="为什么BBR会更好？"></a>为什么BBR会更好？</h2><p>尽管我省略了很多细节，但还免不了是涉及相对复杂的概念。但需要了解的是，使用BBR，可以获得显著的网络吞吐量的提升和延迟的降低。吞吐量的改善在远距离路径上尤为明显，比如跨太平洋的文件或者大数据的传输，尤其是在有轻微丢包的网络条件下。延迟的改善主要体现在最后一公里的路径上，而这一路径经常受到缓冲膨胀（Bufferbloat）的影响。所谓“缓冲膨胀”指的网络设备或者系统不必要地设计了过大的缓冲区。当网络链路<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6">拥塞</a>时，就会发生缓冲膨胀，从而导致数据包在这些超大缓冲区中长时间排队。在<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%85%88%E9%80%B2%E5%85%88%E5%87%BA%E6%BC%94%E7%AE%97%E6%B3%95">先进先出</a>队列系统中，过大的缓冲区会导致更长的队列和更高的延迟，并且不会提高网络吞吐量。由于BBR并不会试图填满缓冲区，所以在避免缓冲区膨胀方面往往会有更好的表现。</p>
<h2 id="看一看BBR的表现"><a href="#看一看BBR的表现" class="headerlink" title="看一看BBR的表现"></a>看一看BBR的表现</h2><p>BBR从4.9版本开始就已经出现在Linux内核之中，可以通过一个简单的sysctl命令来启用。在我的测试中，我使用两台EC2 实例作为测试的硬件，安装的操作系统为Ubuntu 20.04。为了满足测试的要求，我将Linux 核心替换为我定制的5.8版本的核心。这两台实例运行在同一个区域的同一个可用区之下。实例的类型是c5.2xlarge，网卡为Amazon ENA，实例的网络最大带宽为10Gbps。</p>
<p>第一个测试是简单的带宽测试，看看我们可以从两台实例之间的单个TCP流量中得到什么。使用iperf3的测试显示了两台实例之间的带宽为4.98 Gbits&#x2F;秒。这足以运行我们的实验。</p>
<p><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow2.jpg"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow2.png" srcset="/img/loading.gif" lazyload></a></p>
<h3 id="延迟对TCP吞吐量的影响"><a href="#延迟对TCP吞吐量的影响" class="headerlink" title="延迟对TCP吞吐量的影响"></a>延迟对TCP吞吐量的影响</h3><p>在现实的使用中，我所用到的服务器可能分布在世界的各个地区，所以我主要关心的是服务器之间的网络性能，当然网络间的延迟是在所难免的。在这个测试中，我们将使用Linux流量控制工具(tc) 在两台实例之间引入100ms的往返时间。这大致相当于从美国俄勒冈的us-west-2 访问位于日本东京的github.com服务器(52.192.72.89)之间的延迟。</p>
<p>现在我们来看一下正常情况下两台实例的网络延迟</p>
<p><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow3.jpg"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow3.png" srcset="/img/loading.gif" lazyload></a></p>
<p>接下来，可以像下面这样在两台服务器的收发每个方向增加50ms的延迟。</p>
<p><code>sudo tc qdisc replace dev eth0 root netem latency 50ms</code></p>
<p>（注：取消上述的设置可以使用这个命令 <code>sudo tc qdisc del dev eth0 root</code> ）</p>
<p>如果我们用ping命令做一个检测，现在可以看到100ms的往返时间</p>
<p><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow4.jpg"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow4.png" srcset="/img/loading.gif" lazyload></a></p>
<p>好了，该轮到我们的第一个测试了，我先用Cubic拥塞算法开始，因为这是目前最常用的TCP拥塞控制算法。</p>
<p><code>sudo sysctl -w net.ipv4.tcp_congestion_control=cubic</code></p>
<p>iperf3的测试显示平均传输速度为611 Mbits&#x2F;秒。这是延迟对TCP吞吐量影响的第一条线索。与我们的初始测试（4.98Gbits&#x2F;秒）相比，唯一发生变化的是引入了100ms的往返延迟。现在我们将拥塞控制算法设置为bbr，再进行一次测试。</p>
<p><code>sudo sysctl -w net.ipv4.tcp_congestion_control=bbr</code></p>
<p>结果与上一次很相似，约为 609 Mbits&#x2F;秒，这比使用Cubic的结果略低。到目前为止，我们还没有看到真正的变化。</p>
<h3 id="丢包对吞吐量的影响"><a href="#丢包对吞吐量的影响" class="headerlink" title="丢包对吞吐量的影响"></a>丢包对吞吐量的影响</h3><p>我们要重复上面同样的测试，但要增加少量的丢包。通过下面的命令，我只在服务器（发送方）端引入1.5%的丢包量。</p>
<p><code>sudo tc qdisc replace dev eth0 root netem loss 1.5% latency 50ms</code></p>
<p>在使用Cubic算法的第一次测试中，显示出吞吐量的急剧下降；吞吐量下降到了10.5 Mbs&#x2F;秒。这个下降的幅度大约是99.7%，导致这个链路的带宽基本上无法满足数据传输的需要了。</p>
<p><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow5.jpg"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow5.png" srcset="/img/loading.gif" lazyload></a></p>
<p>如果我们用BBR重复完全相同的测试，我们会看到比Cubic有显著的改善。使用BBR后，吞吐量下降到333Mbits&#x2F;秒，下降了45%。</p>
<p><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow6.jpg"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow6.png" srcset="/img/loading.gif" lazyload></a></p>
<p>上面的测试显示了丢包和延迟对TCP吞吐量的巨大影响。在一个高延迟的路径上，仅仅是少量的数据包丢失（1.5%）就会产生了巨大的影响。在这些较长的路径上使用除BBR以外的任何其他技术，当出现哪怕是少量的丢包时，都会造成很大的问题。也只有BBR在任何超过1.5%的丢包损失时都能保持一个不错的吞吐量数字。</p>
<p><a target="_blank" rel="noopener" href="https://toonk.io/author/andree/index.html">Andree Toonk</a> 在他的<a target="_blank" rel="noopener" href="https://toonk.io/tcp-bbr-exploring-tcp-congestion-control/index.html">博客</a>中验证了了使用不同拥塞控制算法、延迟和丢包参数所做的各种TCP吞吐量测试的全套测试，证明了在一定的丢包率（1.5%、3%）的情况下BBR的出色表现。结果如下图：</p>
<p><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow7.jpg"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow7.png" srcset="/img/loading.gif" lazyload></a>网络吞吐量 – 各种拥塞控制算法的测试结果</p>
<p>_注意：一个TCP__会话使用的拥塞控制算法只与局部有关。所以，两个TCP__系统可以在TCP__会话的两边使用不同的拥塞控制算法。换句话说：服务器(__发送方)_<em>，可以在本地启用BBR__，而客户端不需要知道BBR__，也不需要启用BBR__。</em></p>
<h3 id="TCP-ss-socket-statistics-工具"><a href="#TCP-ss-socket-statistics-工具" class="headerlink" title="TCP ss (socket statistics) 工具"></a>TCP ss (socket statistics) 工具</h3><p>当我们在探索调整TCP性能的时候，一定不要忘记使用_socket statistics_,</p>
<p>，也就是ss命令。例如下图所示，ss这个工具可以显示大量的套接字信息，包括使用的TCP流控算法，每个TCP会话的往返时间以及计算出的带宽和两个对等体之间的实际传输速率等，可以很好的用于网络监测和优化。</p>
<p><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow8.jpg"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow8.png" srcset="/img/loading.gif" lazyload></a></p>
<h3 id="何时使用BBR"><a href="#何时使用BBR" class="headerlink" title="何时使用BBR"></a>何时使用BBR</h3><p>网络在没有丢包的情况下，Cubic和BBR对于这些较长时延的链路都有很好的表现。而在中度丢包的情况下，BBR的表现就非常突出了。为什么这一点很重要呢？或者换一个说法，为什么要针对丢包情况而进行优化？对于这个问题，让我们考虑一下这样的场景：我们在不同的地方放置有服务器，需要在系统或者服务器之间有源源不断的数据传输。例如日志文件、数据库同步、业务数据的异地备份等等。而在复杂的网络环境下，会因为各种原因而出现丢包的情况。在这种场景下，BBR将会大放异彩，帮助您维护更好的网络数据传输。</p>
<p>显而易见，BBR对所谓的“长肥网络”（带宽延迟积大、丢包率高的网络）非常有效，在CDN和视频应用等场景下也被证明有很好的表现。事实上，Youtube、Spotify和Dropbox大规模应用BBR已经有了很多的积累。这主要是因为BBR会积极地提升到最佳发送速率，使你的视频流加载或者文件下载速度更快。这是Dropbox 在2017年的一篇技术博客，非常值得我们学习。</p>
<p><a target="_blank" rel="noopener" href="https://dropbox.tech/infrastructure/optimizing-web-servers-for-high-throughput-and-low-latency">Optimizing web servers for high throughput and low latency</a></p>
<h3 id="BBR的缺点"><a href="#BBR的缺点" class="headerlink" title="BBR的缺点"></a>BBR的缺点</h3><p>看这个标题很觉得奇怪吧。明明只要执行一个sysctl命令，你就能获得更好的吞吐量，网络用户就会获得更好的体验，有什么理由不这样做呢？好吧，BBR自出世以来已经收到了一些批评，首先，因为它倾向于抢占Cubic算法的带宽，在网络公平性上明显存在不足；其次BBR的机制会导致高重传率；第三点是在Wi-Fi环境下用户的网速明显变慢。综合来看，BBR与Cubic 相比只能说互有优劣，各有其擅长的领域。</p>
<h4 id="BBRv2-点展望"><a href="#BBRv2-点展望" class="headerlink" title="BBRv2 点展望"></a>BBRv2 点展望</h4><p>针对BBR 的问题，BBRv2的目标就是解决第一版中存在的一些主要缺点，其改进包括了还使用聚合&#x2F;运行中的参数增强了网络建模，并增加了对ECN(显式拥塞通知)的支持等。为便于理解，我们可以通过这样一张表来了解这几个拥塞算法的异同。</p>
<p><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow9.jpg"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow9.png" srcset="/img/loading.gif" lazyload></a>注：ECN是指网络瓶颈通知发送方在用尽缓冲区并开始“丢尾”数据包之前放慢速度的一种方式</p>
<p>现在我们了解了BBRv2，我们再将之前的实验重复一次，看一看BBRv2的具体表现。</p>
<p>我们先将拥塞算法设定为BBRv2</p>
<p><code>sudo sysctl -w net.ipv4.tcp_congestion_control=bbr2</code></p>
<p>接下来，使用iperf3 进行测速，结果如下：</p>
<p><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow10.jpg"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow10.png" srcset="/img/loading.gif" lazyload></a></p>
<p>对比BBRv2、BBRv1的这两个实验，我们能明显的观察到BBRv2 较之BBR速度明显变“慢”了。但这可以说是一件好事，因为这或许是BBRv2广泛应用的前提。</p>
<p>随着BBRv2的出现，Dropbox 已经在其Dropbox Edge Network上进行了试用。在这篇博客中深入讨论了BBRv2的实践，值得一读。</p>
<p><a target="_blank" rel="noopener" href="https://dropbox.tech/infrastructure/evaluating-bbrv2-on-the-dropbox-edge-network">Evaluating BBRv2 on the Dropbox Edge Network</a></p>
<p>这篇文章的结论对于BBRv2有很高的评价，特摘录出来：</p>
<p>“在我们的测试中，BBRv2显示了以下特性:</p>
<ol>
<li>对于网速较低的用户来说，带宽可以与CUBIC媲美。</li>
<li>对于网速较高的用户来说，带宽可以与BBRv1媲美。</li>
<li>丢包率比BBRv1低4倍；但仍然比CUBIC高2倍。</li>
<li>传输中的数据比BBRv1低3倍；但略低于CUBIC。</li>
<li>RTTs较BBRv1低；但仍然比CUBIC高。</li>
<li>与BBRv1相比，RTT具有更高的公平性。</li>
</ol>
<p>总的来说，BBRv2在BBRv1基础上有了很大的改进，而且在需要更高带宽的情况下，它更接近于成为Reno&#x2F;CUBIC的完全替代品。添加实验性的ECN支持，我们甚至可以看到他可以成为Datacenter TCP (DCTCP)的完全替代者。”</p>
<p>自2019年算法被提出， BBR2 已有了3个年头，但仍处于Alpha&#x2F;Preview Release。各大主流的Linux 分发版本中并没有集成进来。有意了解这个项目不妨通过GitHub 的这个地址来关注一下, <a target="_blank" rel="noopener" href="https://github.com/google/bbr">https://github.com/google/bbr</a>。但是如果想尝鲜却有点麻烦，只能通过编译Linux Kernel 来得到tcp_bbr.ko 这个内核模块。另一种选择是不妨体验一下我刚刚完成的一个基于Ubuntu 20.04 的Linux kernel，其中就包括了这个BBRv2。<br><a target="_blank" rel="noopener" href="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow11.jpg"><img src="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/talking-about-network-optimization-from-the-flow11.png" srcset="/img/loading.gif" lazyload></a></p>
<p>如果对于BBR 或者BBRv2以及这个新的Linux Kernel有兴趣需要与我讨论，可以通过这个邮箱与我联系<a target="_blank" rel="noopener" href="http://lianghon@amazon.com/">lianghon@amazon.com</a>。</p>
<h2 id="本篇作者"><a href="#本篇作者" class="headerlink" title="本篇作者"></a>本篇作者</h2><h3 id="费良宏"><a href="#费良宏" class="headerlink" title="费良宏"></a>费良宏</h3><p>费良宏，AWS Principal Developer Advocate。在过去的20多年一直从事软件架构、程序开发以及技术推广等领域的工作。他经常在各类技术会议上发表演讲进行分享，他还是多个技术社区的热心参与者。他擅长Web领域应用、移动应用以及机器学习等的开发，也从事过多个大型软件项目的设计、开发与项目管理。目前他专注与云计算以及互联网等技术领域，致力于帮助中国的 开发者构建基于云计算的新一代的互联网应用。</p>
<h1 id="转载来源"><a href="#转载来源" class="headerlink" title="转载来源"></a>转载来源</h1><p><a target="_blank" rel="noopener" href="https://aws.amazon.com/cn/blogs/china/talking-about-network-optimization-from-the-flow-control-algorithm/">AWS官方博客</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/network/" class="category-chain-item">network</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/network/">#network</a>
      
        <a href="/tags/tcp/">#tcp</a>
      
        <a href="/tags/BBR/">#BBR</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>TCP拥塞控制算法–从 CUBIC 到 BBRv2</div>
      <div>https://songxwn.com/TCP_BBR/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>费良宏</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年5月20日</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>更新于</div>
          <div>2023年5月20日</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/Image-hosting-service/" title="白嫖Cloudflare和Telegraph搭建自有图床">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">白嫖Cloudflare和Telegraph搭建自有图床</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/zabbix-SNMP-uptime-497day/" title="Zabbix SNMP开机时间497天重置问题">
                        <span class="hidden-mobile">Zabbix SNMP开机时间497天重置问题</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments">
      
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script>
        Fluid.utils.loadComments('#disqus_thread', function() {
          Fluid.utils.createCssLink('https://lib.baomitu.com/disqusjs/1.3.0/disqusjs.css');
          Fluid.utils.createScript('https://lib.baomitu.com/disqusjs/1.3.0/disqus.js', function() {
            new DisqusJS({
              shortname: 'songxwn',
              apikey: ''
            });
          });
        });
      </script>
    
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-left: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="network"
        id="heading-91e02cd2b8621d0c05197f645668c5c4" role="tab" data-toggle="collapse" href="#collapse-91e02cd2b8621d0c05197f645668c5c4"
        aria-expanded="true"
      >
        network
        <span class="list-group-count">(25)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-91e02cd2b8621d0c05197f645668c5c4"
           role="tabpanel" aria-labelledby="heading-91e02cd2b8621d0c05197f645668c5c4">
        
        
          
          
  <div class="category-post-list">
    
    
      
      
        <a href="/DNS_recursive_Server/" title="建立自有递归DNS服务器"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">建立自有递归DNS服务器</span>
        </a>
      
    
      
      
        <a href="/Full_Stack_Network_Engineer/" title="如何成为全栈网络工程师？"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">如何成为全栈网络工程师？</span>
        </a>
      
    
      
      
        <a href="/IP_Mask_Gateway/" title="IP地址 子网掩码 默认网关 随笔"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">IP地址 子网掩码 默认网关 随笔</span>
        </a>
      
    
      
      
        <a href="/Juniper_L3-MPLS/" title="Juniper MPLS L3VPN实验配置"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Juniper MPLS L3VPN实验配置</span>
        </a>
      
    
      
      
        <a href="/Juniper_RE-Protect/" title="Juniper RE防护-过滤SSH&amp;Telnet登录"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Juniper RE防护-过滤SSH&amp;Telnet登录</span>
        </a>
      
    
      
      
        <a href="/MPLS_VPN/" title="MPLS VPN随笔（L3 单域）"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">MPLS VPN随笔（L3 单域）</span>
        </a>
      
    
      
      
        <a href="/MikroTik_ROS_WinBox_DNS/" title="MikroTik ROS Winbox Ping工具DNS问题"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">MikroTik ROS Winbox Ping工具DNS问题</span>
        </a>
      
    
      
      
        <a href="/OSI/" title="OSI七层网络参考模型 随笔"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">OSI七层网络参考模型 随笔</span>
        </a>
      
    
      
      
        <a href="/QINQ/" title="QinQ 随笔"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">QinQ 随笔</span>
        </a>
      
    
      
      
        <a href="/TCP_BBR/" title="TCP拥塞控制算法–从 CUBIC 到 BBRv2"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">TCP拥塞控制算法–从 CUBIC 到 BBRv2</span>
        </a>
      
    
      
      
        <a href="/categories/network/" class="list-group-item list-group-item-action">
          <span class="category-post">More...</span>
        </a>
        
  </div>

          
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="vxlan"
        id="heading-cc9fdff17fe90752400924ef32962330" role="tab" data-toggle="collapse" href="#collapse-cc9fdff17fe90752400924ef32962330"
        aria-expanded="false"
      >
        vxlan
        <span class="list-group-count">(5)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-cc9fdff17fe90752400924ef32962330"
           role="tabpanel" aria-labelledby="heading-cc9fdff17fe90752400924ef32962330">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/VXLAN/" title="什么是VXLAN"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">什么是VXLAN</span>
        </a>
      
    
      
      
        <a href="/VXLAN_Basic/" title="VXLAN 基本概念"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">VXLAN 基本概念</span>
        </a>
      
    
      
      
        <a href="/VXLAN_Configuration/" title="VXLAN 基本配置"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">VXLAN 基本配置</span>
        </a>
      
    
      
      
        <a href="/VXLAN_Principle/" title="VXLAN 转发原理"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">VXLAN 转发原理</span>
        </a>
      
    
      
      
        <a href="/BGP_EVPN_Basic/" title="什么是EVPN？"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">什么是EVPN？</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
        
      </div>
    </div>
  
</div>


  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
      <div class="col-lg-7 mx-auto nopadding-x-md">
        <div class="container custom mx-auto">
          <a href="https://www.foreverblog.cn/go.html" target="_blank"> <img src="https://img.foreverblog.cn/wormhole_1_tp.gif" alt="" style="width:auto;height:32px;" title="穿梭虫洞-随机访问十年之约友链博客"></a>,<a href="https://www.vultr.com/?ref=7199488" target="_blank"> <img src="https://www.vultr.com/media/logo_ondark.svg" alt="" style="width:auto;height:32px;" title="注册vultr获取免费10美元体验额度"></a>,<a href="https://url.cn/eTx2WPml" target="_blank"> <img src="https://s3.bmp.ovh/imgs/2023/05/06/989aea4d82987ca9.png" alt="" style="width:auto;height:32px;" title="【腾讯云】云服务器、云数据库、COS、CDN、短信等云产品特惠热卖中"></a>
        </div>
      </div>
    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  

<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    
      <script  src="/js/img-lazyload.js" ></script>
    
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  
<script src="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/DynamicRibbon.min.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
